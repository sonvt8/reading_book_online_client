<section class="page-wrapper">
    <!--NavBar-->
    <app-header></app-header>

    <!--Body-->
    <section class="truyen-main">
        <section class="truyen-section section-featured">
            <section class="container container-full mb-4 mt-5">
                <section class="featured-content">
                    <section class="container-fluid">
                        <section class="featured-content" id="content">
                            <section class="row">
                                <app-account-navbar></app-account-navbar>
                                <section class="col-lg-10 col-md-9">
                                    <section class="row">
                                        <div class="col">
                                            <div class="card mb-5">
                                                <h3 class="card-header primary-color white-text">
                                                    <span class="oi oi-book"></span> Cập Nhật Truyện
                                                </h3>
                                                <div class="card-body">
                                                    <form class="section-preview" enctype="multipart/form-data"
                                                        id="editStoryForm" name='editStoryForm'
                                                        [formGroup]="editStoryForm" (ngSubmit)="onSubmit()">
                                                        <!--Grid row-->
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="md-form mb-0">
                                                                    <input type="text" class="form-control" id="id"
                                                                        name="id" [(ngModel)]="story.id"
                                                                        [ngModelOptions]="{standalone: true}" readonly>
                                                                    <label for="id"
                                                                        class="form-label text-primary active">ID Truyện
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--Grid row-->
                                                        <!--Grid row-->
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="md-form mb-0">
                                                                    <input type="text" id="name" formControlName="name"
                                                                        class="form-control" autocomplete="off" />
                                                                    <label for="title"
                                                                        class="form-label text-primary active"
                                                                        active>Tên Truyện</label>
                                                                    <div *ngIf="(f['name'].touched || submitted) && f['name'].errors"
                                                                        class="text-danger">
                                                                        <em *ngIf="f['name'].errors['required']">Tên
                                                                            truyện không được để trống</em>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--Grid row-->
                                                        <!--Grid row-->
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="md-form mb-0">
                                                                    <input type="text" class="form-control" id="author"
                                                                        name="author" formControlName="author"
                                                                        autocomplete="off" />
                                                                    <label for="author"
                                                                        class=" form-label text-primary active"
                                                                        active>Tác giả</label>
                                                                    <div *ngIf="(f['author'].touched || submitted) && f['author'].errors"
                                                                        class="text-danger">
                                                                        <em *ngIf="f['author'].errors['required']">Tên
                                                                            Tác Giả không được để trống</em>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--Grid row-->
                                                        <!--Grid row-->
                                                        <div class="row">
                                                            <!--Grid column-->
                                                            <div class="col-md-12">
                                                                <div class="md-form mb-0">
                                                                    <textarea type="text" id="infomation"
                                                                        name="infomation" rows="6"
                                                                        class="form-control md-textarea"
                                                                        formControlName="enterInformation"></textarea>
                                                                    <label for="infomation"
                                                                        class="form-label text-primary active">Giới
                                                                        Thiệu</label>
                                                                    <div *ngIf="this.editStoryForm.controls['enterInformation'].errors?.['required'] && submitted"
                                                                        class="text-danger">
                                                                        <em>Giới Thiệu không được để trống</em>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--Grid row-->
                                                        <!--Grid row-->
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="md-form mb-0">
                                                                    <input type="text" class="form-control"
                                                                        id="createDate" name="createDate"
                                                                        [ngModel]="story.createDate | date:'dd-MM-yyyy'"
                                                                        [ngModelOptions]="{standalone: true}" readonly>
                                                                    <label for="createDate"
                                                                        class="text-primary active">Ngày Tạo </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--Grid row-->
                                                        <!--Grid row-->
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <label
                                                                    class="md-label-cs text-primary mt-1  form-label">Thể
                                                                    Loại</label>
                                                            </div>
                                                            <!-- Material checked -->
                                                            <div class="col-6 col-md-4 col-lg-2"
                                                                *ngFor="let category of categories">
                                                                <div class="custom-control custom-checkbox">
                                                                    <input type="checkbox"
                                                                        id="inlineCheckbox{{category.id}}"
                                                                        name="categoryList" class="custom-control-input"
                                                                        [value]="category.name"
                                                                        [checked]="isSelected(category.name)"
                                                                        (change)="onCheckboxChange($event)" />
                                                                    <label class="custom-control-label"
                                                                        for="inlineCheckbox{{category.id}}"
                                                                        style="line-height: 1.8">{{category.name}}</label>

                                                                </div>
                                                            </div>
                                                            <div class="col-md-12">
                                                                <div *ngIf="!this.categoryList.value.length && submitted"
                                                                    class="text-danger">
                                                                    <em>Bạn chưa chọn thể loại nào</em>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--Grid row-->
                                                        <!--Grid row-->
                                                        <div class="row">
                                                            <!--Grid column-->
                                                            <div class="col-12 mt-2">
                                                                <label class="md-label-cs text-primary form-label">Hình
                                                                    Ảnh</label>
                                                            </div>
                                                            <div class="col-md-12">
                                                                <div class="md-form mt-0">
                                                                    <div class="file-field">
                                                                        <div class="btn blue-gradient btn-sm float-left">
                                                                            <span>Chọn Ảnh</span>
                                                                            <input type="file" id="inputFile" accept="image/png, image/jpeg, image/jpg" (change)="onImageUpload($event)"/>
                                                                        </div>
                                                                        <div class="file-path-wrapper form-row">
                                                                            <div class="col-8">
                                                                                <!-- Material input -->
                                                                                <input class="file-path" type="text" placeholder="Ảnh Bìa" id="file-name" readonly>
                                                                            </div>
                                                                            <!-- Grid column -->
                                                                            <div class="col-auto">
                                                                                <!-- Material input -->
                                                                                <button type="button" class="btn btn-sm btn-danger btn-remove" id="img-remove">Hủy</button>
                                                                            </div>
                                                                            <!-- Grid column -->
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <section class="col-12 col-sm-3 img-input">
                                                                <img id="imgLogo" class="img-fluid" src="{{story.images}}">
                                                            </section>
                                                        </div>
                                                        <!--Grid row-->
                                                        <!--Grid row-->
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <select class="mdb-select md-form colorful-select dropdown-primary" (change)="valueChange($event)">
                                                                    <option *ngFor="let status of statusList" [ngValue]="status.id" [selected]="status.id === storyStatus">
                                                                        {{ status.label}}
                                                                    </option>
                                                                </select>
                                                                <label
                                                                    class="md-label-cs text-primary mt-1 form-label">Trạng
                                                                    Thái</label>
                                                            </div>
                                                        </div>
                                                        <!--Grid row-->
                                                        <div class="row text-right">
                                                            <div class="col-12">
                                                                <button type="reset"
                                                                    class="btn btn-outline-primary btn-rounded waves-effect">Khôi
                                                                    Phục</button>
                                                                <button type="submit" [disabled]="loading"
                                                                    class="btn btn-outline-primary btn-rounded waves-effect">
                                                                    <span *ngIf="loading"
                                                                        class="spinner-border spinner-border-sm mr-1"></span>Cập
                                                                    NhậtTruyện
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </section>
                            </section>
                        </section>
                    </section>
                </section>
            </section>
        </section>
    </section>
</section>

<!--Footer-->
<app-footer></app-footer>