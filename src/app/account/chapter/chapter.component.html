<section class="page-wrapper">
    <!--NavBar-->
    <app-header></app-header>

    <!--Body-->
    <section class="truyen-main">
        <section class="truyen-section section-featured">
            <section class="container container-full mb-4 mt-5">
                <section class="featured-content">
                    <section class="container-fluid">
                        <section class="featured-content" id="content">
                            <section class="row">
                                <app-account-navbar></app-account-navbar>
                                <section class="col-lg-10 col-md-9">
                                    <div class="card">
                                        <h3 class="card-header primary-color white-text text-center">
                                            Danh sách chương Truyện <span>{{story.name}}</span>
                                        </h3>
                                        <div class="card-body table-responsive">
                                            <div class="row">
                                                <div class="col-sm-12 col-md-6 col-12">
                                                    <a class="btn btn-outline-primary btn-rounded waves-effect"
                                                        routerLink="/tai_khoan/them_chuong_truyen/{{storyId}}"><i
                                                            class="fas fa-plus"></i> Thêm Chương</a>
                                                </div>
                                                <div class="col-sm-12 col-md-6 col-12">
                                                    <select class="mdb-select md-form colorful-select dropdown-primary mt-0" [(ngModel)] = "type" name="type" (change)="getChapterListByStoryId(1)">
                                                        <option *ngFor="let item of typeList" [ngValue]="item">
                                                            {{item.label}}
                                                        </option>
                        
                                                    </select>
                                                </div>
                                                <div class="col-12">
                                                    <table class="table table-striped" cellspacing="0" width="100%">
                                                        <thead>
                                                            <tr>
                                                                <th class="font-weight-bolder">Thứ Tự</th>
                                                                <th class="font-weight-bolder">Chương</th>
                                                                <th class="font-weight-bolder">Ngày Đăng</th>
                                                                <th class="font-weight-bolder">Trạng Thái</th>
                                                                <th class="font-weight-bolder"></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let chapter of listChapter">
                                                                <td>{{chapter.serial}}</td>
                                                                <td><a target="_blank"
                                                                        routerLink="/truyen-home/{{storyId}}/{{chapter.id}}">Chương
                                                                        {{chapter.chapterNumber}} : {{chapter.name}}</a>
                                                                </td>
                                                                <td>{{chapter.createDate | date:'HH:mm dd/MM/yyyy' }}
                                                                </td>
                                                                <td>
                                                                    <span *ngIf="chapter.status===1"
                                                                        class="badge badge-pill badge-success">Free</span>
                                                                    <span *ngIf="chapter.status===2"
                                                                        class="badge badge-pill badge-info">Vip</span>
                                                                    <span *ngIf="chapter.status===0"
                                                                        class="badge badge-pill badge-danger">Khóa</span>
                                                                </td>
                                                                <td>
                                                                    <a title="Sửa" routerLink=""
                                                                        class="badge badge-pill badge-danger"><i
                                                                            class="fas fa-edit mx-1"></i></a>
                                                                    <a (click)="deleteChapter(chapter.id)"
                                                                        title="Xóa Chapter"
                                                                        class="badge badge-pill badge-danger"><i
                                                                            class="fas fa-trash mx-1"></i></a>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <div aria-label="Page navigation example" *ngIf="totalPages>1">
                                                        <ul class="pagination pg-blue justify-content-end">
                                                            <li class="page-item" *ngIf="currentPage != 1">
                                                                <a class="page-link"
                                                                    (click)="getChapterListByStoryId(currentPage - 1)">
                                                                    <i class="fas fa-step-backward fa-sm"></i>
                                                                </a>
                                                            </li>
                                                            <li *ngFor="let page of pages"
                                                                [ngClass]="page === currentPage?'page-item active': 'page-item'">
                                                                <a class="page-link"
                                                                    (click)="getChapterListByStoryId(page)">{{page}}</a>
                                                            </li>
                                                            <li class="page-item" *ngIf="currentPage != totalPages">
                                                                <a class="page-link"
                                                                    (click)="getChapterListByStoryId(currentPage + 1)">
                                                                    <i class="fas fa-step-forward fa-sm"></i>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </section>
                        </section>
                    </section>
                </section>
            </section>
        </section>
    </section>
</section>
<!--Footer-->
<app-footer></app-footer>